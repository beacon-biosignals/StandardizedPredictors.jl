var documenterSearchIndex = {"docs":
[{"location":"api/","page":"API","title":"API","text":"CurrentModule = StandardizedPredictors","category":"page"},{"location":"api/#API","page":"API","title":"API","text":"","category":"section"},{"location":"api/","page":"API","title":"API","text":"","category":"page"},{"location":"api/","page":"API","title":"API","text":"Modules = [StandardizedPredictors]","category":"page"},{"location":"api/#StandardizedPredictors.Center","page":"API","title":"StandardizedPredictors.Center","text":"struct Center\n\nRepresents a centering scheme, akin to StatsModels.AbstractContrasts.  Pass as value in Dict as hints to schema (or as contrasts kwarg for fit).\n\nExamples\n\nCan specify center value to use:\n\njulia> schema((x=collect(1:10), ), Dict(:x => Center(5)))\nStatsModels.Schema with 1 entry:\n  x => center(x, 5)\n\nOr center will be automatically computed if left out:\n\njulia> schema((x=collect(1:10), ), Dict(:x => Center()))\nStatsModels.Schema with 1 entry:\n  x => center(x, 5.5)\n\n\n\n\n\n","category":"type"},{"location":"api/#StandardizedPredictors.CenteredTerm","page":"API","title":"StandardizedPredictors.CenteredTerm","text":"struct CenteredTerm{T,C} <: AbstractTerm\n\nA lazily centered term.  A wrapper around an T<:AbstractTerm which will produce centered values with modelcols by subtracting center from each element generated by the wrapped term with modelcols.\n\nFields\n\nterm::T: The wrapped term.\ncenter::C: The center value subtracted from the resulting modelcols.\n\nExamples\n\nDirectly construct with given center:\n\njulia> d = (x=collect(1:10), );\n\njulia> t = concrete_term(term(:x), d)\nx(continuous)\n\njulia> tc = CenteredTerm(t, 5)\nx(centered: 5)\n\njulia> hcat(modelcols(t + tc, d)...)\n10×2 Matrix{Int64}:\n  1  -4\n  2  -3\n  3  -2\n  4  -1\n  5   0\n  6   1\n  7   2\n  8   3\n  9   4\n 10   5\n\nConstruct with lazy centering via Center\n\njulia> tc = concrete_term(term(:x), d, Center())\ncenter(x, 5.5)\n\njulia> hcat(modelcols(t + tc, d)...)\n10×2 Matrix{Float64}:\n  1.0  -4.5\n  2.0  -3.5\n  3.0  -2.5\n  4.0  -1.5\n  5.0  -0.5\n  6.0   0.5\n  7.0   1.5\n  8.0   2.5\n  9.0   3.5\n 10.0   4.5\n\nOr similarly via schema hints:\n\njulia> sch = schema(d, Dict(:x => Center()))\nStatsModels.Schema with 1 entry:\n  x => center(x, 5.5)\n\n\n\n\n\n","category":"type"},{"location":"api/#StandardizedPredictors.Scale","page":"API","title":"StandardizedPredictors.Scale","text":"struct Scale\n\nRepresents a scaling scheme, akin to StatsModels.AbstractContrasts.  Pass as value in Dict as hints to schema (or as contrasts kwarg for fit).\n\nExamples\n\nCan specify scale value to use:\n\njulia> schema((x=collect(1:10), ), Dict(:x => Scale(5)))\nStatsModels.Schema with 1 entry:\n  x => x(scaled: 5))\n\nOr scale will be automatically computed if left out:\n\njulia> schema((x=collect(1:10), ), Dict(:x => Scale()))\nStatsModels.Schema with 1 entry:\n  x => x(scaled: 3.03)\n\n\n\n\n\n","category":"type"},{"location":"api/#StandardizedPredictors.ScaledTerm","page":"API","title":"StandardizedPredictors.ScaledTerm","text":"struct ScaledTerm{T,S} <: AbstractTerm\n\nA lazily scaled term.  A wrapper around an T<:AbstractTerm which will produce scaled values with modelcols by dividing each element by scale.\n\nFields\n\nterm::T: The wrapped term.\nscale::S: The scale value which the resulting modelcols are divided by.\n\nExamples\n\nDirectly construct with given scale:\n\njulia> d = (x=collect(1:10), );\n\njulia> t = concrete_term(term(:x), d)\nx(continuous)\n\njulia> ts = ScaledTerm(t, 5)\nx(scaled: 5)\n\njulia> hcat(modelcols(t + ts, d)...)\n10×2 Matrix{Float64}:\n  1.0  0.2\n  2.0  0.4\n  3.0  0.6\n  4.0  0.8\n  5.0  1.0\n  6.0  1.2\n  7.0  1.4\n  8.0  1.6\n  9.0  1.8\n 10.0  2.0\n\nConstruct with lazy scaling via Scale\n\njulia> ts = concrete_term(term(:x), d, Scale())\nx(scaled: 3.03)\n\njulia> hcat(modelcols(t + ts, d)...)\n10×2 Matrix{Float64}:\n  1.0  0.330289\n  2.0  0.660578\n  3.0  0.990867\n  4.0  1.32116\n  5.0  1.65145\n  6.0  1.98173\n  7.0  2.31202\n  8.0  2.64231\n  9.0  2.9726\n 10.0  3.30289\n\nOr similarly via schema hints:\n\njulia> sch = schema(d, Dict(:x => Scale()))\nStatsModels.Schema with 1 entry:\n  x => scale(x, 3.03)\n\n\n\n\n\n","category":"type"},{"location":"api/#StandardizedPredictors.ZScore","page":"API","title":"StandardizedPredictors.ZScore","text":"struct ZScore\n\nRepresents a z-scoring scheme, akin to StatsModels.AbstractContrasts.  Pass as value in Dict as hints to schema (or as contrasts kwarg for fit).\n\nExamples\n\nCan specify the center and scale values to use:\n\njulia> schema((x=collect(1:10), ), Dict(:x => ZScore(; center=5, scale=3)))\nStatsModels.Schema with 1 entry:\n  x => x(centered: 5 scaled: 3)\n\nOr scale will be automatically computed if left out:\n\njulia> schema((x=collect(1:10), ), Dict(:x => ZScore()))\nStatsModels.Schema with 1 entry:\n  x => x(centered: 5.5 scaled: 3.03)\n\n\n\n\n\n","category":"type"},{"location":"api/#StandardizedPredictors.ZScoredTerm","page":"API","title":"StandardizedPredictors.ZScoredTerm","text":"struct ZScoredTerm{T,C,S} <: AbstractTerm\n\nA lazily z-scored term. A wrapper around an T<:AbstractTerm which will produce scaled values with modelcols by subtracting center from each element and then dividing by scale.\n\nFields\n\nterm::T: The wrapped term.\ncenter::C: The center value which is subtracted from the resulting modelcols.\nscale::S: The scale value which the resulting modelcols are divided by.\n\nExamples\n\nDirectly construct with given scale:\n\njulia> d = (x=collect(1:10), );\n\njulia> t = concrete_term(term(:x), d)\nx(continuous)\n\njulia> ts = ZScoredTerm(t, 3, 5)\nx(centered: 3 scaled: 5)\n\njulia> hcat(modelcols(t + ts, d)...)\n10×2 Matrix{Float64}:\n  1.0  -0.4\n  2.0  -0.2\n  3.0   0.0\n  4.0   0.2\n  5.0   0.4\n  6.0   0.6\n  7.0   0.8\n  8.0   1.0\n  9.0   1.2\n 10.0   1.4\n\nConstruct with lazy scaling via ZScore\n\njulia> ts = concrete_term(term(:x), d, ZScore())\nx(centered: 5.5 scaled: 3.03)\n\njulia> hcat(modelcols(t + ts, d)...)\n10×2 Matrix{Float64}:\n  1.0  -1.4863\n  2.0  -1.15601\n  3.0  -0.825723\n  4.0  -0.495434\n  5.0  -0.165145\n  6.0   0.165145\n  7.0   0.495434\n  8.0   0.825723\n  9.0   1.15601\n 10.0   1.4863\n\nOr similarly via schema hints:\n\njulia> sch = schema(d, Dict(:x => ZScore()))\nStatsModels.Schema with 1 entry:\n  x => x(centered: 5.5 scaled: 3.03)\n\n\n\n\n\n","category":"type"},{"location":"api/#StandardizedPredictors.center!-Tuple{Any}","page":"API","title":"StandardizedPredictors.center!","text":"center!(f=mean, x, y=f(skipmissing(x)))\n\nCenter an array x in place about a scalar y.\n\nSee also center\n\n\n\n\n\n","category":"method"},{"location":"api/#StandardizedPredictors.center-Tuple{Any}","page":"API","title":"StandardizedPredictors.center","text":"center(f=mean, x, y=f(skipmissing(x)))\n\nCenter an array x about a scalar y.\n\nSee also center!\n\n\n\n\n\n","category":"method"},{"location":"api/#StandardizedPredictors.scale!-Tuple{Any}","page":"API","title":"StandardizedPredictors.scale!","text":"scale(f=std, x, y=f(skipmissing(x)))\n\nScale an array x in place by a scalar y.\n\nwarning: Warning\nThis only scales and does not center the values, unlike scale in R. See StatsBase.zscore for that functionality.\n\nSee also scale\n\n\n\n\n\n","category":"method"},{"location":"api/#StandardizedPredictors.scale-Tuple{Any}","page":"API","title":"StandardizedPredictors.scale","text":"scale(f=std, x, y=f(skipmissing(x)))\n\nScale an array x by a scalar y.\n\nwarning: Warning\nThis only scales and does not center the values, unlike scale in R. See StatsBase.zscore for that functionality.\n\nSee also scale!\n\n\n\n\n\n","category":"method"},{"location":"","page":"Home","title":"Home","text":"CurrentModule = StandardizedPredictors","category":"page"},{"location":"#StandardizedPredictors","page":"Home","title":"StandardizedPredictors","text":"","category":"section"},{"location":"","page":"Home","title":"Home","text":"This package provides convenient and modular functionality for standardizing regression predictors.  Standardizing predictors can increase numerical stability of some estimation procedures when the predictors are on very different scales or when they are non-orthogonal.  It can also produce more interpretable regression models in the presence of interaction terms.","category":"page"},{"location":"","page":"Home","title":"Home","text":"The examples below demonstrate the use of StandardizedPredictors.jl with GLM.jl, but they will work with any modeling package that is based on the StatsModels.jl formula.","category":"page"},{"location":"#Centering","page":"Home","title":"Centering","text":"","category":"section"},{"location":"","page":"Home","title":"Home","text":"Let's consider a (slightly) synthetic dataset of weights for adolescents of different ages, with predictors age (continuous, from 13 to 20) and sex, and weight in pounds.  The weights are based loosely on the medians from the CDC growth charts, which show that the median male and female both start off around 100 pounds at age 13, but by age 20 the median male weighs around 155 pounds while the median female weighs around 125 pounds.","category":"page"},{"location":"","page":"Home","title":"Home","text":"julia> using StandardizedPredictors, DataFrames, StatsModels, GLM, StableRNGs\n\njulia> rng = StableRNG(1);\n\njulia> data = DataFrame(age=[13:20; 13:20], \n                        sex=repeat([\"male\", \"female\"], inner=8),\n                        weight=[range(100, 155; length=8); range(100, 125; length=8)] .+ randn(rng, 16))\n16×3 DataFrame\n Row │ age    sex     weight\n     │ Int64  String  Float64\n─────┼─────────────────────────\n   1 │    13  male     99.4675\n   2 │    14  male    107.956\n   3 │    15  male    116.467\n   4 │    16  male    122.728\n   5 │    17  male    129.415\n   6 │    18  male    139.016\n   7 │    19  male    148.175\n   8 │    20  male    155.676\n   9 │    13  female  100.082\n  10 │    14  female  103.818\n  11 │    15  female  105.642\n  12 │    16  female  111.043\n  13 │    17  female  112.433\n  14 │    18  female  117.52\n  15 │    19  female  121.464\n  16 │    20  female  125.232","category":"page"},{"location":"","page":"Home","title":"Home","text":"In this dataset, there's obviously a main effect of sex: males are heavier than females for every age except 13 years.  But if we run a basic linear regression, we see something rather different:","category":"page"},{"location":"","page":"Home","title":"Home","text":"julia> lm(@formula(weight ~ 1 + sex * age), data)\nStatsModels.TableRegressionModel{LinearModel{GLM.LmResp{Vector{Float64}}, GLM.DensePredChol{Float64, LinearAlgebra.CholeskyPivoted{Float64, Matrix{Float64}}}}, Matrix{Float64}}\n\nweight ~ 1 + sex + age + sex & age\n\nCoefficients:\n──────────────────────────────────────────────────────────────────────────────\n                     Coef.  Std. Error       t  Pr(>|t|)  Lower 95%  Upper 95%\n──────────────────────────────────────────────────────────────────────────────\n(Intercept)       52.9701     2.5343     20.90    <1e-10   47.4483    58.4918\nsex: male        -56.9962     3.58404   -15.90    <1e-08  -64.8052   -49.1873\nage                3.58693    0.152134   23.58    <1e-10    3.25545    3.9184\nsex: male & age    4.37602    0.21515    20.34    <1e-09    3.90725    4.84479\n──────────────────────────────────────────────────────────────────────────────","category":"page"},{"location":"","page":"Home","title":"Home","text":"There is a main effect of sex but it goes in the exact opposite direction of what we know to be true, and says that males are 55 pounds lighter.  The reason is that because there's an interaction between sex and age in this model, the main effect of sex the (extrapolated) difference in weight between sexes when age is 0.","category":"page"},{"location":"","page":"Home","title":"Home","text":"That's a non-sensical value, since it's far outside of our range of ages.  When we Center age, we get something more meaningful:","category":"page"},{"location":"","page":"Home","title":"Home","text":"julia> lm(@formula(weight ~ 1 + sex * age), data; contrasts=Dict(:age => Center()))\nStatsModels.TableRegressionModel{LinearModel{GLM.LmResp{Vector{Float64}}, GLM.DensePredChol{Float64, LinearAlgebra.CholeskyPivoted{Float64, Matrix{Float64}}}}, Matrix{Float64}}\n\nweight ~ 1 + sex + age + sex & age\n\nCoefficients:\n──────────────────────────────────────────────────────────────────────────────────────────────\n                                     Coef.  Std. Error       t  Pr(>|t|)  Lower 95%  Upper 95%\n──────────────────────────────────────────────────────────────────────────────────────────────\n(Intercept)                      112.154      0.348583  321.74    <1e-24  111.395    112.914\nsex: male                         15.2081     0.492971   30.85    <1e-12   14.134     16.2822\nage(centered: 16.5)                3.58693    0.152134   23.58    <1e-10    3.25545    3.9184\nsex: male & age(centered: 16.5)    4.37602    0.21515    20.34    <1e-09    3.90725    4.84479\n──────────────────────────────────────────────────────────────────────────────────────────────","category":"page"},{"location":"","page":"Home","title":"Home","text":"We can also center age at a different value, like the start of our range where the difference is essentially zero:","category":"page"},{"location":"","page":"Home","title":"Home","text":"julia> lm(@formula(weight ~ 1 + sex * age), data; contrasts=Dict(:age => Center(13)))\nStatsModels.TableRegressionModel{LinearModel{GLM.LmResp{Vector{Float64}}, GLM.DensePredChol{Float64, LinearAlgebra.CholeskyPivoted{Float64, Matrix{Float64}}}}, Matrix{Float64}}\n\nweight ~ 1 + sex + age + sex & age\n\nCoefficients:\n────────────────────────────────────────────────────────────────────────────────────────────\n                                   Coef.  Std. Error       t  Pr(>|t|)  Lower 95%  Upper 95%\n────────────────────────────────────────────────────────────────────────────────────────────\n(Intercept)                    99.6001      0.636422  156.50    <1e-20   98.2134   100.987\nsex: male                      -0.107954    0.900037   -0.12    0.9065   -2.06897    1.85306\nage(centered: 13)               3.58693     0.152134   23.58    <1e-10    3.25545    3.9184\nsex: male & age(centered: 13)   4.37602     0.21515    20.34    <1e-09    3.90725    4.84479\n────────────────────────────────────────────────────────────────────────────────────────────","category":"page"}]
}
